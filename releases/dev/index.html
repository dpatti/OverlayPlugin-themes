<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title></title>
    <link rel="stylesheet" type="text/css" href="css/meters.css">
    <script src="lib/react.min.js"></script>
    <script src="lib/lodash.min.js"></script>
    <script>
      const app = document.createElement('script');
      app.src = "lib/meters.js?_=" + Math.random();
      app.onload = () => {
        function onOverlayDataUpdate(e) {
          var start = new Date().getTime();
          var details = e.detail;

          React.render(
            React.createElement(DamageMeter, {
              parseData: e.detail
            }),
            document.getElementById('container')
          );
        }
        document.addEventListener('onOverlayDataUpdate', onOverlayDataUpdate);
        document.addEventListener("onOverlayStateUpdate", function (e) {
          if (!e.detail.isLocked) {
            document.documentElement.classList.add("resizable");
          } else {
            document.documentElement.classList.remove("resizable");
          }
        });
        window.addEventListener('message', function (e) {
          if (e.data.type === 'onOverlayDataUpdate') {
            onOverlayDataUpdate(e.data);
          }
        });
      }
      document.documentElement.appendChild(app);
    </script>
</head>
<body>
    <div id="container">
        <h3>Awaiting data.</h3>
    </div>
</body>
</html>
